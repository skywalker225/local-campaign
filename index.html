<html>  

  <script async src="https://campaigns-app.zercoms.com/js/v1/campaign/"></script>
  <script>
    window.addEventListener('load', function () {
        nextCampaign.config({
            apiKey: "6EBHp2lVNMNHE1Ha2X9lR6LweibO0fr5O9HrM5LK",
        })
        nextCampaign.event('page_view', {
            title: document.title,
            url: window.location.href
        });
    });
  </script>
  
  <button id="submitBtn">Submit Order</button>
  
  <label for="orderRefId">Order Ref ID:</label>
  <input type="text" id="orderRefId" placeholder="Enter order_ref_id">
  <button id="submitUpsellBtn">Submit Upsell</button>
  
  <!-- Order Create -->
  <script>
  document.getElementById('submitBtn').addEventListener('click', function () {
    const payload = {
      "lines": [
          {
              "package_id": 1,
              "quantity": 1
          }
          ,{
              "package_id": 2,
              "quantity": 1
              // ,"is_upsell": true
          }
      ],
      "currency": "USD",
      // "vouchers": ["SUMMER"],
      shipping_method: 1,
      user: {
        email: "monchaya+campaign@29next.com",
        first_name: "Mon",
        last_name: "Campaigns",
        phone_number: "+15732020210"
      },
      payment_detail: {
        // payment_method: "paypal"
        payment_method: "card_token",
        card_token: "test_card"
        // card_token: "01KA8C8DQVXMFC9XNRCBEF117A"
      },
      shipping_address: {
        first_name: "test",
        last_name: "test",
        country: "US",
        line1: "4389 Marigold Lane",
        state: "FL",
        postcode: "33134",
        line4: "Coral Gables",
        phone_number: "+12025550112"
      },
      // billing_address: {
      //   first_name: "test",
      //   last_name: "test",
      //   country: "US",
      //   line1: "4389 Marigold Lane",
      //   state: "FL",
      //   postcode: "33134",
      //   line4: "Coral Gables",
      //   phone_number: "+12025550112"
      // },
      billing_same_as_shipping_address: true,
      success_url: "https://webhook.site/10d5e8cb-1940-4c34-8100-f2fb33b0a671"
    };

    fetch('https://campaigns-app.zercoms.com/api/v1/orders/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': '6EBHp2lVNMNHE1Ha2X9lR6LweibO0fr5O9HrM5LK' // Replace with your actual token
      },
      body: JSON.stringify(payload)
    })
    .then(response => {
      if (!response.ok) {
        throw new Error('HTTP error ' + response.status);
      }
      return response.json();
    })
    .then(data => {
      console.log('Success:', data);
      alert('Order submitted!');
    })
    .catch(error => {
      console.error('Error:', error);
      alert('Failed to submit order.');
    });
  });
</script>


  <!-- Upsell  -->
  <script>
  document.getElementById('submitUpsellBtn').addEventListener('click', function () {
    const orderRefId = document.getElementById('orderRefId').value.trim();

    if (!orderRefId) {
      alert('Please enter a valid order_ref_id.');
      return;
    }

    const url = `https://campaigns-app.zercoms.com/api/v1/orders/${encodeURIComponent(orderRefId)}/upsells/`;

    const payload = {
      "lines": [
          {
              "package_id": 2,
              "quantity": 1
          }
          ,{
              "package_id": 18,
              "quantity": 1
              // ,"is_upsell": true
          }
      ]
    };

    fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': '6EBHp2lVNMNHE1Ha2X9lR6LweibO0fr5O9HrM5LK' // Replace with your real token
      },
      body: JSON.stringify(payload)
    })
    .then(response => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.json();
    })
    .then(data => {
      console.log('Upsell success:', data);
      alert('Upsell submitted!');
    })
    .catch(error => {
      console.error('Upsell error:', error);
      alert('Failed to submit upsell.');
    });
  });
</script>
  
</html>
